{"version":3,"sources":["webpack:///./src/views/webManage/OrderSave.vue?a34b","webpack:///./src/api/orderManage/order.js","webpack:///./src/views/webManage/OrderSave.vue?1033","webpack:///src/views/webManage/OrderSave.vue","webpack:///./src/views/webManage/OrderSave.vue?2fa7","webpack:///./src/views/webManage/OrderSave.vue"],"names":["orderList","params","request","url","method","orderDetailList","orderAndDetailList","saveOrderAndPay","data","render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","tableData","scopedSlots","_u","key","fn","scope","_v","_s","row","goods","name","price","num","_f","slot","staticClass","sum","nativeOn","$event","toSaveOrderAndPay","staticRenderFns","mounted","methods","computed","totalSum","forEach","v","component"],"mappings":"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","file":"js/chunk-6105c23f.16fb517a.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.5.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./OrderSave.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.5.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./OrderSave.vue?vue&type=style&index=0&lang=scss&\"","import request from \"@/utils/request.js\";\r\n\r\n/**\r\n * 获取订单列表\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function orderList(params) {\r\n  return request({\r\n    url: \"/order/list\", //如果是绝对路径就不会在使用配置里的url\r\n    method: \"get\",\r\n    params: params //注意：如果是post请求请使用 data: params\r\n  });\r\n}\r\n\r\n/**\r\n * 获取订单详情列表\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function orderDetailList(params) {\r\n  return request({\r\n    url: \"/order/unionlist\", //如果是绝对路径就不会在使用配置里的url\r\n    method: \"get\",\r\n    params: params //注意：如果是post请求请使用 data: params\r\n  });\r\n}\r\n\r\n/**\r\n * 根据用户id获取订单列表以及订单详情列表\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function orderAndDetailList(params) {\r\n  return request({\r\n    url: \"/order/unionlistByUserId\", //如果是绝对路径就不会在使用配置里的url\r\n    method: \"get\",\r\n    params: params //注意：如果是post请求请使用 data: params\r\n  });\r\n}\r\n\r\n/**\r\n * 保存订单并支付\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function saveOrderAndPay(params) {\r\n  return request({\r\n    url: \"/pay/toSaveAndPay\", //如果是绝对路径就不会在使用配置里的url\r\n    method: \"post\",\r\n    data: params //注意：如果是post请求请使用 data: params\r\n  });\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{staticStyle:{\"margin\":\"50px auto\",\"width\":\"70%\"},attrs:{\"data\":_vm.tableData,\"tooltip-effect\":\"dark\"}},[_c('el-table-column',{attrs:{\"label\":\"商品信息\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.goods.name))]}}])}),_c('el-table-column',{attrs:{\"label\":\"单价\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.goods.price))]}}])}),_c('el-table-column',{attrs:{\"label\":\"数量\",\"width\":\"255\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.num))]}}])}),_c('el-table-column',{attrs:{\"label\":\"小计\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"toDecimal\")(scope.row.goods.price*scope.row.num)))]}}])}),_c('div',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"slot\":\"append\"},slot:\"append\"},[_c('div',{staticClass:\"order-footer clear\"},[_c('div',{staticClass:\"submit-con\"},[_c('span',[_vm._v(\"合计：\")]),_c('span',{staticClass:\"submit-total\"},[_vm._v(\" ￥ \"),_c('span',{attrs:{\"id\":\"selectGoodsMoney\"}},[_vm._v(_vm._s(_vm._f(\"toDecimal\")(_vm.sum)))])]),_c('el-button',{staticClass:\"btn submit-btn\",nativeOn:{\"click\":function($event){return _vm.toSaveOrderAndPay($event)}}},[_vm._v(\"提交订单\")])],1)])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-table\r\n      :data=\"tableData\"\r\n      tooltip-effect=\"dark\"\r\n      style=\"margin:50px auto;width: 70%\"\r\n    >\r\n      <el-table-column label=\"商品信息\">\r\n        <template slot-scope=\"scope\">{{ scope.row.goods.name }}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"单价\">\r\n        <template slot-scope=\"scope\">{{ scope.row.goods.price }}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"数量\" width=\"255\">\r\n        <template slot-scope=\"scope\">{{ scope.row.num }}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"小计\">\r\n        <template slot-scope=\"scope\">{{ scope.row.goods.price*scope.row.num|toDecimal }}</template>\r\n      </el-table-column>      \r\n      <div style=\"margin-top: 20px\" slot=\"append\">\r\n        <div class=\"order-footer clear\">\r\n          <div class=\"submit-con\">\r\n            <span>合计：</span>\r\n            <span class=\"submit-total\">\r\n              ￥\r\n              <span id=\"selectGoodsMoney\">{{sum|toDecimal}}</span>\r\n            </span>\r\n            <el-button class=\"btn submit-btn\" @click.native=\"toSaveOrderAndPay\">提交订单</el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-table>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { saveOrderAndPay } from \"@/api/orderManage/order\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: []\r\n    };\r\n  },\r\n  mounted() {    \r\n      this.tableData = this.$route.query.cartOrder\r\n  },\r\n  methods: {\r\n    toSaveOrderAndPay() {\r\n\t\tvar vNow = new Date();\r\n\t\tvar sNow = \"\";\r\n\t\tsNow += String(vNow.getFullYear());\r\n\t\tsNow += String(vNow.getMonth() + 1);\r\n\t\tsNow += String(vNow.getDate());\r\n\t\tsNow += String(vNow.getHours());\r\n\t\tsNow += String(vNow.getMinutes());\r\n\t\tsNow += String(vNow.getSeconds());\r\n\t\tsNow += String(vNow.getMilliseconds());\r\n        saveOrderAndPay({out_trade_no:sNow,subject:\"测试\",total_amount:this.sum,body:'商品描述测试'})\r\n        .then(r => {\r\n            const divForm = document.getElementsByTagName('divform')\r\n                if (divForm.length) {\r\n                    document.body.removeChild(divForm[0])\r\n                }\r\n                const div = document.createElement('divform')\r\n                div.innerHTML = r // data就是接口返回的form 表单字符串\r\n                document.body.appendChild(div)\r\n                document.forms[0].setAttribute('target', '_blank') // 新开窗口跳转\r\n                document.forms[0].submit()\r\n        })\r\n        .catch(() => {});\r\n\t}\r\n  },\r\n  computed: {\r\n    \r\n    sum: function() {\r\n      //总价钱\r\n      var totalSum = 0.0;\r\n      this.tableData.forEach(function(v) {\r\n        totalSum += v.goods.price * v.num; //等价于totalSum=totalSum+v.price*v.count\r\n      });\r\n      return totalSum;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n/* order-footer */\r\n.order-footer {\r\n  position: relative;\r\n  line-height: 50px;\r\n  background: #eee;\r\n  overflow: hidden;\r\n}\r\n.order-footer .select-con {\r\n  float: left;\r\n  padding-left: 20px;\r\n}\r\n.order-footer .submit-con {\r\n  float: right;\r\n}\r\n.btn{\r\n  background:#c60023;\r\n  color:#eee;\r\n}\r\n.order-footer .submit-con .submit-total,\r\n#selectGoodsCount {\r\n  font-size: 18px;\r\n  color: #c60023;\r\n  font-weight: bold;\r\n  margin-right: 30px;\r\n  vertical-align: middle;\r\n}\r\n#selectGoodsCount {\r\n  margin-right: 5px;\r\n}\r\n.submit-con .submitDis {\r\n  background: #b0b0b0;\r\n  cursor: no-drop;\r\n}\r\n.order-footer .submit-con .btn-submit {\r\n  width: 80px;\r\n  text-align: center;\r\n  height: 50px;\r\n  line-height: 50px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./OrderSave.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./OrderSave.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderSave.vue?vue&type=template&id=7cd7bde8&\"\nimport script from \"./OrderSave.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderSave.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderSave.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}