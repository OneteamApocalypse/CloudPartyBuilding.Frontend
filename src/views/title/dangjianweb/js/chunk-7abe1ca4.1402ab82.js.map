{"version":3,"sources":["webpack:///./src/views/goodsManage/goodsList/Index.vue?6c7b","webpack:///./src/api/goodsTypeManage/goodsType.js","webpack:///./src/views/goodsManage/goodsList/Edit.vue?f0a4","webpack:///src/views/goodsManage/goodsList/Edit.vue","webpack:///./src/views/goodsManage/goodsList/Edit.vue?768a","webpack:///./src/views/goodsManage/goodsList/Edit.vue","webpack:///src/views/goodsManage/goodsList/Index.vue","webpack:///./src/views/goodsManage/goodsList/Index.vue?0564","webpack:///./src/views/goodsManage/goodsList/Index.vue","webpack:///./src/views/goodsManage/goodsList/Edit.vue?b1a6","webpack:///./src/api/goodsManage/list.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","showEditDialog","_v","exportTable","staticStyle","model","value","searchParams","callback","$$v","$set","expression","_l","item","key","id","typename","refresh","clearSearchParams","tableData","scopedSlots","_u","fn","s","serverImageUrl","row","imgpath","state","_e","editItem","updateState","pageSize","total","changePage","staticRenderFns","goodsTypeList","params","request","url","method","dialogWidth","title","openDialog","ref","staticClass","forms","rules","labelWidth","serverApiUrl","handleAvatarSuccess","beforeAvatarUpload","slot","$emit","submit","props","type","String","default","data","name","goodsdesc","price","typeid","goodsTypeData","created","initData","methods","$refs","editForms","validate","valid","message","console","log","$parent","resetFields","FillerFormField","res","file","$message","duration","response","status","msg","URL","createObjectURL","raw","isJPG","isGIF","isPNG","isBMP","error","isLt2M","component","pageNo","stateValue","val","returnData","pageList","list","newstate","$confirm","confirmButtonText","cancelButtonText","updateStateApi","components","goods","saveGoods","getGoods","updateGoodsState"],"mappings":"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","file":"js/chunk-7abe1ca4.1402ab82.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ToolBar',[_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.showEditDialog = true}}},[_vm._v(\"添加商品\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.exportTable}},[_vm._v(\"本地导出表格\")])],1),_c('div',[_c('el-input',{staticStyle:{\"width\":\"140px\"},attrs:{\"placeholder\":\"请输入商品名\",\"size\":\"small\",\"clearable\":\"\"},model:{value:(_vm.searchParams.title),callback:function ($$v) {_vm.$set(_vm.searchParams, \"title\", $$v)},expression:\"searchParams.title\"}}),_c('el-select',{staticStyle:{\"width\":\"140px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"请选择商品类型\",\"size\":\"small\"},model:{value:(_vm.searchParams.type),callback:function ($$v) {_vm.$set(_vm.searchParams, \"type\", $$v)},expression:\"searchParams.type\"}},_vm._l((_vm.goodsTypeData),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.typename,\"value\":item.id}})}),1),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.refresh()}}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.clearSearchParams()}}},[_vm._v(\"重置\")])],1)]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"商品名\"}}),_c('el-table-column',{attrs:{\"prop\":\"price\",\"label\":\"价格\"}}),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(s){return [_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":_vm.serverImageUrl+s.row.imgpath}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(s){return [(s.row.state==1)?_c('div',[_vm._v(\"已下架\")]):_vm._e(),(s.row.state==2)?_c('div',[_vm._v(\"已上架\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"240\"},scopedSlots:_vm._u([{key:\"default\",fn:function(s){return _c('div',{},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.editItem(s.row.id)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.updateState(s.row.id,0)}}},[_vm._v(\"删除\")]),(s.row.state==1)?_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.updateState(s.row.id,2)}}},[_vm._v(\"上架\")]):_vm._e(),(s.row.state==2)?_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.updateState(s.row.id,1)}}},[_vm._v(\"下架\")]):_vm._e()],1)}}])})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"page-size\":_vm.pageSize,\"layout\":\"prev, pager, next\",\"total\":_vm.total},on:{\"current-change\":_vm.changePage}}),_c('Edit',{attrs:{\"showEditDialog\":_vm.showEditDialog},on:{\"close\":function($event){_vm.showEditDialog = false},\"success\":function($event){return _vm.refresh()}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from \"@/utils/request.js\";\r\n\r\n/**\r\n * 获取商品类型\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function goodsTypeList(params) {\r\n  return request({\r\n    url: \"/goodsType/list\", //如果是绝对路径就不会在使用配置里的url\r\n    method: \"get\",\r\n    params: params //注意：如果是post请求请使用 data: params\r\n  });\r\n}\r\n/**\r\n * 获取添加商品类型\r\n * @param params\r\n * @returns {AxiosPromise}\r\n */\r\nexport function addGoodsType(params) {\r\n    return request({\r\n      url: \"/goodsType/add\", //如果是绝对路径就不会在使用配置里的url\r\n      method: \"post\",\r\n      data: params //注意：如果是post请求请使用 data: params\r\n    });\r\n  }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"width\":_vm.dialogWidth,\"title\":_vm.title,\"visible\":_vm.showEditDialog,\"show-close\":false,\"close-on-click-modal\":false},on:{\"opened\":_vm.openDialog,\"update:visible\":function($event){_vm.showEditDialog=$event}}},[_c('el-form',{ref:\"editForms\",staticClass:\"edit-forms\",attrs:{\"model\":_vm.forms,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":_vm.labelWidth}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.forms.name),callback:function ($$v) {_vm.$set(_vm.forms, \"name\", $$v)},expression:\"forms.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"价格\",\"prop\":\"price\"}},[_c('el-input',{attrs:{\"placeholder\":\"最多2位小数\"},model:{value:(_vm.forms.price),callback:function ($$v) {_vm.$set(_vm.forms, \"price\", $$v)},expression:\"forms.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\",\"prop\":\"goodsdesc\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.forms.goodsdesc),callback:function ($$v) {_vm.$set(_vm.forms, \"goodsdesc\", $$v)},expression:\"forms.goodsdesc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品类型\",\"prop\":\"typeid\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择商品类型\"},model:{value:(_vm.forms.typeid),callback:function ($$v) {_vm.$set(_vm.forms, \"typeid\", $$v)},expression:\"forms.typeid\"}},_vm._l((_vm.goodsTypeData),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.typename,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"图片\",\"prop\":\"imgpath\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"name\":\"picture\",\"action\":_vm.serverApiUrl+'/upload/uploadGoodsImg',\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.forms.url)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.forms.url}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.$emit('close')}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"确认\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    @opened=\"openDialog\"\n    :width=\"dialogWidth\"\n    :title=\"title\"\n    :visible.sync=\"showEditDialog\"\n    :show-close=\"false\"\n    :close-on-click-modal=\"false\"\n  >\n    <el-form\n      :model=\"forms\"\n      :rules=\"rules\"\n      ref=\"editForms\"\n      class=\"edit-forms\"\n      label-position=\"left\"\n      :label-width=\"labelWidth\"\n    >\n      <el-form-item label=\"商品名称\" prop=\"name\">\n        <el-input v-model=\"forms.name\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"价格\" prop=\"price\">\n        <el-input v-model=\"forms.price\" placeholder=\"最多2位小数\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"描述\" prop=\"goodsdesc\">\n        <el-input type=\"textarea\" v-model=\"forms.goodsdesc\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品类型\" prop=\"typeid\">\n        <el-select v-model=\"forms.typeid\" placeholder=\"请选择商品类型\">\n          <el-option\n            v-for=\"item in goodsTypeData\"\n            :key=\"item.id\"\n            :label=\"item.typename\"\n            :value=\"item.id\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"图片\" prop=\"imgpath\">\n        <el-upload\n          name=\"picture\"\n          class=\"avatar-uploader\"\n          :action=\"serverApiUrl+'/upload/uploadGoodsImg'\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\"\n        >\n          <img v-if=\"forms.url\" :src=\"forms.url\" class=\"avatar\" />\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"$emit('close')\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"submit\">确认</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport {\n  Required,\n  Float2,\n  Boolean,\n  FillerFieldRules\n} from \"@/utils/validateRules\";\nimport { serverApiUrl } from \"@/config/apiUrl\";\nimport { fillerLeft, resetObject } from \"@/utils/common\";\nimport { goodsTypeList } from \"@/api/goodsTypeManage/goodsType\";\nimport { saveGoods, getGoods } from \"@/api/goodsManage/list\";\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: \"编辑\"\n    },\n    dialogWidth: {\n      type: String,\n      default: \"700px\"\n    },\n    labelWidth: {\n      type: String,\n      default: \"120px\"\n    },\n    showEditDialog: Boolean\n  },\n  data() {\n    return {\n      forms: {\n        name: \"\",\n        goodsdesc: \"\",\n        price: \"\",\n        url: \"\", //预览图片完整路径\n        typeid: \"\",\n        imgpath: \"\" //保存到数据库的图片名称\n      },\n      rules: {\n        ...FillerFieldRules([\"name\"], Required),\n        price: [Required, Float2],\n        typeid: Boolean\n      },\n      serverApiUrl: serverApiUrl,\n      goodsTypeData: []\n    };\n  },\n  created() {\n    this.initData(); //页面加载就初始化商品类型数据\n  },\n  methods: {\n    initData() {\n      goodsTypeList()\n        .then(r => {\n          //获取商品类型列表\n          this.goodsTypeData = r;\n        })\n        .catch(() => {});\n    },\n    submit() {\n      this.$refs.editForms.validate(valid => {\n        if (valid) {\n          this.$message({\n            message: \"字段验证通过，提交请求，成功后刷新分页！\",\n            type: \"success\"\n          });\n          // this.$emit(\"success\"); //通知列表分页刷新\n          saveGoods(this.forms)\n            .then(r => {\n              this.$message({\n                message: r.msg,\n                type: \"success\"\n              });\n              this.$emit(\"success\");\n              // this.$parent.refresh();\n              this.$parent.showEditDialog = false;\n              // location.reload();//数据和组件所有的刷新了，组件重构了，会影响\n            })\n            .catch(() => {});\n        } else {\n          this.$message({\n            message: \"请按照提示正确填写内容！\",\n            type: \"warning\"\n          });\n          return false;\n        }\n      });\n    },\n    openDialog() {\n      console.log(this.$parent.id);\n      \n      if (this.$parent.id != null) {\n        //编辑\n        getGoods({ id: this.$parent.id })\n          .then(r => {\n            //根据id获取商品信息\n            this.FillerFormField(this.$parent.id, r);\n            this.forms.url=this.$parent.serverImageUrl+r.imgpath;\n            this.$parent.id = null;\n          })\n          .catch(() => {});          \n      } else {\n        //新增\n        resetObject(this.forms);\n        this.$set(this.forms, \"id\", null);\n        this.$refs.editForms.resetFields();\n      }\n    },\n    FillerFormField(id, data) {\n      //可以外部填充回写做编辑用，也可以请求详情接口填充表单\n      this.$set(this.forms, \"id\", id);\n      fillerLeft(this.forms, data);\n    },\n    handleAvatarSuccess(res, file) {\n      console.log(res);\n      console.log(file);\n      this.$message({\n        type: \"info\",\n        message: \"图片上传成功\",\n        duration: 6000\n      });\n      if (file.response.status == \"success\") {\n        this.forms.imgpath = file.response.msg; //上传图片成功之后保存图片的名称\n        this.forms.url = URL.createObjectURL(file.raw);\n      }\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\";\n      const isGIF = file.type === \"image/gif\";\n      const isPNG = file.type === \"image/png\";\n      const isBMP = file.type === \"image/bmp\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isJPG && !isGIF && !isPNG && !isBMP) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return (isJPG || isBMP || isGIF || isPNG) && isLt2M;\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=5dc4a969&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Edit.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <ToolBar>\n      <div>\n        <el-button type=\"primary\" size=\"small\" @click=\"showEditDialog = true\">添加商品</el-button>\n        <el-button type=\"primary\" size=\"small\" @click=\"exportTable\">本地导出表格</el-button>\n      </div>\n      <div>\n        <el-input\n          placeholder=\"请输入商品名\"\n          size=\"small\"\n          style=\"width: 140px\"\n          v-model=\"searchParams.title\"\n          clearable\n        ></el-input>\n        <el-select\n          v-model=\"searchParams.type\"\n          clearable\n          style=\"width: 140px\"\n          placeholder=\"请选择商品类型\"\n          size=\"small\"\n        >\n          <el-option\n            v-for=\"item in goodsTypeData\"\n            :key=\"item.id\"\n            :label=\"item.typename\"\n            :value=\"item.id\"\n          ></el-option>\n        </el-select>\n        <el-button type=\"success\" size=\"small\" @click=\"refresh()\">查询</el-button>\n        <el-button type=\"warning\" size=\"small\" @click=\"clearSearchParams()\">重置</el-button>\n      </div>\n    </ToolBar>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column prop=\"name\" label=\"商品名\"></el-table-column>\n      <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\n      <el-table-column prop label=\"图片\">\n        <template slot-scope=\"s\">\n          <el-image style=\"width: 100px; height: 100px\" :src=\"serverImageUrl+s.row.imgpath\"></el-image>\n        </template>\n      </el-table-column>\n      <el-table-column prop label=\"状态\">\n        <template slot-scope=\"s\">\n          <div v-if=\"s.row.state==1\">已下架</div>\n          <div v-if=\"s.row.state==2\">已上架</div>\n        </template>\n      </el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"240\">\n        <div slot-scope=\"s\">\n          <!-- <el-tooltip :content=\"stateValue\" placement=\"top\">\n            <el-switch\n              v-model=\"stateValue\"\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n              active-value=\"2\"\n              inactive-value=\"1\"\n              @change=\"updateState(s.row.id)\"\n            ></el-switch>\n          </el-tooltip>-->\n          <el-button type=\"primary\" size=\"small\" @click=\"editItem(s.row.id)\">编辑</el-button>\n          <el-button type=\"danger\" size=\"small\" @click=\"updateState(s.row.id,0)\">删除</el-button>\n          <el-button\n            v-if=\"s.row.state==1\"\n            type=\"success\"\n            size=\"small\"\n            @click=\"updateState(s.row.id,2)\"\n          >上架</el-button>\n          <el-button\n            v-if=\"s.row.state==2\"\n            type=\"warning\"\n            size=\"small\"\n            @click=\"updateState(s.row.id,1)\"\n          >下架</el-button>\n        </div>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      :page-size=\"pageSize\"\n      layout=\"prev, pager, next\"\n      :total=\"total\"\n      @current-change=\"changePage\"\n    ></el-pagination>\n    <!--    <Pagination-->\n    <!--      :params=\"searchParams\"-->\n    <!--      :requestFunc=\"requestFunc\"-->\n    <!--      ref=\"pagination\"-->\n    <!--      @returnData=\"returnData\"-->\n    <!--    />-->\n    <Edit :showEditDialog=\"showEditDialog\" @close=\"showEditDialog = false\" @success=\"refresh()\" />\n  </div>\n</template>\n\n<script>\nimport { goods,updateGoodsState } from \"@/api/goodsManage/list\";\nimport { goodsTypeList } from \"@/api/goodsTypeManage/goodsType\";\nimport { exportCvsTable } from \"@/utils/cvs\";\nimport { resetObject } from \"@/utils/common\";\nimport { serverApiUrl } from \"@/config/apiUrl\";\nimport Edit from \"./Edit.vue\";\nexport default {\n  data() {\n    return {\n      serverImageUrl: serverApiUrl + \"/upload/goods/\", //可以从后端得到\n      pageSize: 5, //每页显示5条\n      total: 0, //总条数\n      pageNo: 1, //默认当前页码第1页\n      searchParams: {\n        title: \"\",\n        type: \"\"\n      },\n      showEditDialog: false,\n      tableData: [],\n      goodsTypeData: [],\n      id: null,\n      stateValue: 1\n    };\n  },\n  created() {\n    this.initData(); //页面加载就初始化商品数据，默认选第一页的数据\n  },\n  methods: {\n    changePage(val) {\n      //val:改变页码当前的页码\n      this.pageNo = val;\n      this.initData(); //根据新的页码选取分页数据\n    },\n    initData() {\n      goods({\n        //获取商品列表\n        pageNo: this.pageNo,\n        pageSize: this.pageSize,\n        name: this.searchParams.title,\n        typeid: this.searchParams.type\n      })\n        .then(r => {\n          this.tableData = r.list;\n          this.total = r.count;\n        })\n        .catch(() => {});\n      goodsTypeList()\n        .then(r => {\n          //获取商品类型列表\n          this.goodsTypeData = r;\n        })\n        .catch(() => {});\n    },\n    editItem(id) {\n      this.id = id;\n      this.showEditDialog = true;\n    },\n    exportTable() {\n      exportCvsTable(\n        [\n          { title: \"文章标题\", field: \"title\" },\n          { title: \"浏览量\", field: \"visit_count\" }\n        ],\n        this.tableData,\n        \"文章列表\"\n      );\n    },\n    refresh() {\n      this.initData();\n    },\n    returnData(pageList) {\n      this.tableData = pageList.list;\n    },\n    clearSearchParams() {\n      resetObject(this.searchParams);\n      this.refresh();\n    },\n    updateState(id, newstate) {\n      if (newstate == 0) {\n        //删除\n        this.$confirm(\"确定删除?\", \"提示\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        })\n          .then(() => {\n            this.updateStateApi(id, newstate);\n          })\n          .catch(() => {});\n      } else {\n        //上下架\n        this.updateStateApi(id, newstate);\n      }\n    },\n    updateStateApi(id, newstate) {\n      console.log(id, newstate);\n      \n      updateGoodsState({ id: id,state:newstate})\n        .then(r => {\n          this.$message({\n            type: \"success\",\n            message: r.msg\n          });\n          this.refresh();\n        })\n        .catch(() => {});\n    }\n  },\n\n  components: { Edit }\n};\n</script>\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=430439aa&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.5.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.5.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&lang=scss&\"","import request from \"@/utils/request.js\";\n\n/**\n * 获取商品\n * @param params\n * @returns {AxiosPromise}\n */\nexport function goods(params) {\n  return request({\n    url: \"/goods/getGoodsList\", //如果是绝对路径就不会在使用配置里的url\n    method: \"post\",\n    data: params //注意：如果是get请求请使用 params: params\n  });\n}\n\n/**\n * 新增商品\n * @param params\n * @returns {AxiosPromise}\n */\nexport function saveGoods(params) {\n  console.log(\"goods的参数\"+params);  \n  return request({\n    url: \"/goods/saveGoods\", //如果是绝对路径就不会在使用配置里的url\n    method: \"post\",\n    data: params //注意：如果是get请求请使用 params: params\n  });\n}\n/**\n * 查询商品\n * @param params\n * @returns {AxiosPromise}\n */\nexport function getGoods(params) { \n  return request({\n    url: \"/goods/getGoodsById\", //如果是绝对路径就不会在使用配置里的url\n    method: \"get\",\n    params: params //注意：如果是get请求请使用 params: params\n  });\n}\n\n/**\n * 修改商品状态\n * @param params\n * @returns {AxiosPromise}\n */\nexport function updateGoodsState(params) {\n  return request({\n    url: \"/goods/updateState\", //如果是绝对路径就不会在使用配置里的url\n    method: \"post\",\n    data: params //注意：如果是get请求请使用 params: params\n  });\n}"],"sourceRoot":""}